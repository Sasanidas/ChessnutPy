<!DOCTYPE html>
<html>
<head>
<!-- HTML Codes by Quackit.com -->
<meta http-equiv="cache-control" content="no-cache" />
<title>
</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {background-color: #312b2b;background-repeat:no-repeat;background-position:top left;background-attachment:fixed;}
h1{font-family:Arial, sans-serif;letter-spacing:20px;color: #ffffff;background-color: #312b2b;}
p {font-family:Georgia, serif;font-size:14px;font-style:normal;font-weight:normal;color: #ffffff;background-color: #312b2b;}
label {font-family:Georgia, serif;font-size:14px;font-style:normal;font-weight:normal;color: #ffffff;background-color: #312b2b;}
pre {font-family:Georgia, serif;font-size:14px;font-style:normal;font-weight:normal;color: #ffffff;background-color: #312b2b;}
</style>
    <script>
        const myVar2 = setInterval(get_current_opening, 500);
        async function get_current_opening() {
            const opening_response = await fetch('opening');
            const move_stack_response = await fetch('move_stack')
            const last_score_response = await fetch('last_score')
            const counter_opening_response = await fetch('get_book_moves')
            let data = await opening_response.json();
            document.getElementById('opening').innerHTML = "Current Opening: " + data;
            data = await move_stack_response.text();
            document.getElementById('move_stack').innerHTML = "" + data;
            document.getElementById('boardImage').src = 'board.svg?time='+new Date().getTime();
            data = await last_score_response.json();
            document.getElementById('last_score').innerHTML = 'Last calculated score: '+ (data ? data : "never calculated");
            data = await counter_opening_response.json();
            let data_str = ""
            data.forEach((l) => data_str += l+"<br>");
            document.getElementById('counter_openings').innerHTML = (data_str.length>0 ? data_str : "No counter openings found.");
            const battery_response = await fetch('battery_status')
            document.getElementById('battery').innerHTML = 'Battery: '+await battery_response.text()

        }
        get_current_opening()
    </script>
</head>
<body>
<h1>ChessComputer</h1>
<p>Board:</p>
<img id="boardImage" alt="Current Gameboard" src="board.svg"/>
<p id="opening">Current Opening: CUR_OPENING</p>
<p>Book Counter Openings:</p>
<p id="counter_openings"></p>
<p>Current Move Stack:</p>
<p id="move_stack">CUR_MOVE_STACK</p>
<p id="last_score">Last calculated score: never calculated</p>
<p id="battery">Battery: </p>
<form action="/read_board" method="post">
    <input type="hidden" name="test" value="3" >
    <button name="readBoard" value="read_board">Read Board</button>
</form>
<form action="/set_engine_limit" method="post" accept-charset="utf-8" enctype="application/x-www-form-urlencoded">
    <br><label for="limit_time">Time:</label><input id="limit_time" name="time" type="number" min="0" step="0.1" value="0.5">
    <br><label for="limit_depth">Depth:</label><input id="limit_depth" name="depth" type="number" min="0" step="0" value="0">
    <br><label for="limit_nodes">Nodes:</label><input id="limit_nodes" name="nodes" type="number" min="0" step="0" value="0">
    <br><input id="cpu_selected" type="radio" name="engine_select" value="CPU" checked><label for="cpu_selected">Set CPU Limit</label>
    <br><input id="sug_selected" type="radio" name="engine_select" value="SUG"><label for="sug_selected">Set Suggestion Limit</label>
    <br><input type="submit" value="Submit Limit">
</form>
<form action="/set_engine_cfg" method="post" accept-charset="utf-8" enctype="application/x-www-form-urlencoded">
    <br><label for="engine_cfg">Engine UCI Config:</label><textarea id="engine_cfg" name="cfg_dict" rows="5" cols="50">
{
    "UCI_LimitStrength": true,
    "UCI_Elo": 1400,
    "OwnBook": true
}
    </textarea>
    <br><input type="submit" value="Submit Config">
</form>
</body>
</html>
